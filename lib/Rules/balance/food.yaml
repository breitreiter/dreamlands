# Food & Provisions Balance Data
#
# Philosophy: Category is the mechanic. Names are regional color.
# A protein is a protein — "smoked fish" and "salted pork" are
# functionally identical. The name is assigned at point of sale
# based on settlement biome, exactly like weapon types.
# Flavor names (biome-specific) live in lib/Flavor/food_names.yaml.
#
# Players consume 3 units of food per day during rest resolution.
# Eating one from each category (protein + carb + sweet) is a
# "balanced meal" and grants a mild bonus. You CAN eat 3 proteins
# and survive, but you miss the bonus. Running out means Hungry.

food:
  units_per_day: 3

  # ─── Categories ─────────────────────────────────────────────
  # Mechanically identical within category.

  categories:
    protein:
      base_price: 2
      slots: 1
      stack_size: 10

    carbs:
      base_price: 1
      slots: 1
      stack_size: 10

    sweets:
      base_price: 2
      slots: 1
      stack_size: 10

  # ─── Meal Bonuses ───────────────────────────────────────────
  # Evaluated during rest resolution after the player consumes
  # their 3 units. Category coverage determines the bonus.

  meals:
    balanced:
      description: "A proper meal — protein, carbs, and something sweet."
      requires: [protein, carbs, sweets]  # One of each
      effects:
        health_restore: 1
        spirits_restore: 1

    partial:
      description: "Food in your belly, but nothing to write home about."
      requires: 2_of_3_categories
      effects:
        # No bonus, no penalty. You ate, you're fine.
        health_restore: 0
        spirits_restore: 0

    monotone:
      description: "Three of the same. It keeps you going."
      requires: 1_category_only
      effects:
        health_restore: 0
        spirits_restore: 0

    skimped:
      description: "Not enough. Your stomach won't let you forget it."
      requires: fewer_than_3_units
      effects:
        # Eating 1-2 units avoids the Hungry condition but
        # grants no meal bonus regardless of category spread.
        health_restore: 0
        spirits_restore: 0

    starving:
      description: "Nothing to eat at all."
      requires: 0_units
      effects:
        applies_condition: hungry

  # ─── Foraging ───────────────────────────────────────────────
  # Bushcraft check to scavenge food from the land. You get what
  # you get — category is random, so you can't guarantee a
  # balanced meal from foraging alone. Name drawn from the
  # current biome's "foraged" list for that category.

  foraging:
    skill: bushcraft
    difficulty: easy           # DC 10
    units_on_success: 1        # One unit per successful forage
    attempts_per_day: 2        # Can try twice before nightfall
    category: random           # d3: 1=protein, 2=carbs, 3=sweets
    flavor_source: foraged     # Draw name from biome's foraged list

    biome_modifiers:
      forest:    +2            # Abundant game and plants
      plains:    +0            # Average
      swamp:     -1            # Edible things are hard to identify
      mountains: -2            # Sparse pickings
      scrub:     -3            # Almost nothing grows here

    failure:
      # Failed foraging wastes time but costs nothing.
      # Critical failure (miss by 10+) risks a bad find:
      critical_failure_chance: 0.1
      critical_failure_effect: "Ate something wrong — roll for River Flux."

  # ─── Special Foods ──────────────────────────────────────────
  # These belong to a category (count toward the triad) but also
  # provide a weak prophylactic against a specific condition.
  # They don't cure — they slightly reduce overnight contraction
  # chance. Think garlic-and-ginger soup, not penicillin.
  #
  # More expensive than plain food. Worth packing if you know
  # where you're headed.

  special_foods:
    jorgo_root:
      name: "Jorgo Root"
      category: carbs
      base_price: 5
      slots: 1
      stack_size: 5
      prophylactic:
        condition: swamp_fever
        resist_bonus: +2       # Bonus to resist check
      availability: swamp_adjacent_settlements
      note: "Bitter tuber the locals swear by. Tastes like mud and regret."

    pine_resin_tea:
      name: "Pine Resin Tea"
      category: sweets
      base_price: 4
      slots: 1
      stack_size: 5
      prophylactic:
        condition: rot_lung
        resist_bonus: +2
      availability: mountain_settlements
      note: "Clears the chest. Tastes like licking a tree."

    ember_spice:
      name: "Ember Spice"
      category: sweets
      base_price: 6
      slots: 1
      stack_size: 5
      prophylactic:
        condition: cold
        resist_bonus: +2
      availability: mountain_settlements
      note: "Burns going down. Keeps you warm from the inside."

    smoked_marsh_eel:
      name: "Smoked Marsh Eel"
      category: protein
      base_price: 4
      slots: 1
      stack_size: 5
      prophylactic:
        condition: river_flux
        resist_bonus: +2
      availability: swamp_adjacent_settlements
      note: "If it survived the swamp water, maybe you will too."

    witchwood_bark:
      name: "Witchwood Bark"
      category: carbs
      base_price: 7
      slots: 1
      stack_size: 5
      prophylactic:
        condition: infested
        resist_bonus: +2
      availability: forest_settlements
      note: "Chew it slowly. The parasites hate the taste. So will you."

    stillwater_biscuit:
      name: "Stillwater Biscuit"
      category: carbs
      base_price: 5
      slots: 1
      stack_size: 5
      prophylactic:
        condition: exhausted
        resist_bonus: +2
      availability: common
      note: "Dense, filling, and dull. Gets the job done."
